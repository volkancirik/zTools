{% extends "base.html" %}
{% load i18n %}
{% load helper %}
{% block extrahead %}
{% endblock %}

{% block content %}
     <form id="searchReturnedItemsForm" action="/rts/search_returned_item/" method="post">
        {% csrf_token %}
            <table class="actionPanel" cellpadding="0" cellspacing="0" width="100%">

                        <tr>
                            <td style="font-weight: bold; color: #FFFFFF; font-size: 14px;">
                                Returned Order Tracking Search :
                            </td>
                            <td>Suborder Number : </td>
                            <td class="left">
                                <input id="rts_snr_search" type="textbox" name="suborder_nr" value=""/>
                            </td>
                            <td>
                                Order Number :
                            </td>
                            <td class="left">
                                <input id="rts_order_nr" type="textbox" name="order_nr" value=""/>
                            </td>
                            <td class="right">
                                <a class="submitButton" onclick="return rts_search();">
                                    <span> {% trans "Search" %} </span>
                                </a>
                            </td>
                        </tr>
                </table>
                <script type="text/javascript">
                    function rts_search(){
                        $('#id_buttonSource').val("search");
                        $('#searchReturnedItemsForm').submit();
                    }
                </script>
     </form>
<div class="tabbed">
	<div class="tab-content" style="display:block;">
		<div class="items">
    <table id="orderList">
                <thead>
                    <tr>
                        <th><input type=checkbox name='allSelect' class="allSelect"></th>
                        <th>{% trans "id_sales" %}</th>
                        <th>{% trans "order_nr" %} </th>
                        <th>{% trans "sku" %}</th>
                        <th>{% trans "order_date" %}</th>
                        <th>{% trans "barcode_ean" %}  </th>
                        <th>{% trans "name" %}</th>
                        <th>{% trans "suborder_number" %}</th>
                        <th>{% trans "shipping_name" %}</th>
                        <th>{% trans "billing_name" %}</th>
                        <th>{% trans "bob_status" %}</th>
                        <th>{% trans "return_reason" %}</th>
                        <th>{% trans "action_type" %}</th>
                        <th>{% trans "comment" %}</th>
                        <th>{% trans "time_stamp" %}</th>
                    </tr>
                </thead>
                <tbody >
                    {% for o in oibfr_list %}

                        <tr onclick="viewReturnBox('{{ o.suborder_number }}','{{ o.order_nr }}')">

                            <td><input type=checkbox class="checkboxClass" name='orderChecked' value="{{ o.pk }}"></td>
                            <td>{{ o.id_sales_order_item }}</td>
                            <td>{{ o.order_nr }}</td>
                            <td>{{ o.sku }}</td>
                            <td>{{ o.order_date }}</td>
                            <td>{{ o.barcode_ean }}</td>
                            <td>{{ o.name }}</td>
                            <td>{{ o.suborder_number }}</td>
                            <td>{{ o.shipping_name }}</td>
                            <td>{{ o.billing_name }}</td>
                            <td>{{ o.bob_status }}</td>
                            <td>{{ o.returneditemdetails.return_reason }}</td>
                            <td>{{ o.returneditemdetails.action_type }}</td>
                            <td>{{ o.returneditemdetails.comment }}</td>
                            <td>{{ o.returneditemdetails.time_stamp }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
		</div>
	</div>
    {% include "cross_order/boxes/returned_item_box.html" %}


    <div id="test-div">

    </div>

</div>
<script type="text/javascript">
    $(document).ready(function(){
        var oTable = $('#orderList').dataTable(
                {
                    "sScrollY": "480px",
                    "bJQueryUI": true,
                    "bPaginate": false,
                    "sScrollX": "100%"
                }
        );
{#        $('#id_statusFilter').val({{ cstatus.pk }});#}
        $('.checkboxClass').attr("checked", "");
        $('.allSelect').click(function(){
            if($(this).is(':checked')){
                $('.checkboxClass').attr("checked", 'checked');
            }
            else
                $('.checkboxClass').attr("checked", "");
        });


//        $('#orderList_filter').append('<a class="submitButton" onclick="return viewColumnBox();"><span> Hide/Show Columns </span></a>');

//        $('.DataTables_sort_wrapper').each(function(index) {
//                 headerVal = $(this).text();
//            if(index >0)
//            {
//                columnRow = "<tr><td><input type=checkbox class='columnChecked' name='columnChecked' value='"+index+"'checked>"+ headerVal + "</td></tr>";
//                $('#columnBoxTable').append(columnRow);
//            }
//        });
    });
</script>
{% endblock %}